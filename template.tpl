___TERMS_OF_SERVICE___

By creating or modifying this file you agree to Google Tag Manager's Community
Template Gallery Developer Terms of Service available at
https://developers.google.com/tag-manager/gallery-tos (or such other URL as
Google may provide), as modified from time to time.


___INFO___

{
  "type": "TAG",
  "id": "cvt_temp_public_id",
  "version": 1,
  "securityGroups": [],
  "displayName": "Adservice Click",
  "categories": ["AFFILIATE_MARKETING", "ADVERTISING"],
  "brand": {
    "id": "adservice",
    "displayName": "Adservice",
    "thumbnail": "data:image/png;base64,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\u003d"
  },
  "description": "Tracks the required unique Click ID for the click, which is used later for the Conversion tracking.",
  "containerContexts": [
    "WEB"
  ]
}


___TEMPLATE_PARAMETERS___

[]


___SANDBOXED_JS_FOR_WEB_TEMPLATE___

const log = require('logToConsole');
const queryPermission = require('queryPermission');
const getUrl = require('getUrl');
const getQueryParameters = require('getQueryParameters');
const setCookie = require('setCookie');
const options = {
  'domain': data.cookieDomain,
  'max-age': data.maxAge,
  'path': '/'
};

if (queryPermission('get_url', 'query', 'coid')) {
  const coid = getQueryParameters('coid');
  
  if (coid) {
    if (queryPermission('set_cookies', 'coid', options)) {
      var test = setCookie('coid', coid, options);
    }
  }
}

// Call data.gtmOnSuccess when the tag is finished.
data.gtmOnSuccess();


___WEB_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "logging",
        "versionId": "1"
      },
      "param": [
        {
          "key": "environments",
          "value": {
            "type": 1,
            "string": "debug"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "set_cookies",
        "versionId": "1"
      },
      "param": [
        {
          "key": "allowedCookies",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "name"
                  },
                  {
                    "type": 1,
                    "string": "domain"
                  },
                  {
                    "type": 1,
                    "string": "path"
                  },
                  {
                    "type": 1,
                    "string": "secure"
                  },
                  {
                    "type": 1,
                    "string": "session"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "coid"
                  },
                  {
                    "type": 1,
                    "string": "*"
                  },
                  {
                    "type": 1,
                    "string": "*"
                  },
                  {
                    "type": 1,
                    "string": "any"
                  },
                  {
                    "type": 1,
                    "string": "any"
                  }
                ]
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "get_url",
        "versionId": "1"
      },
      "param": [
        {
          "key": "queriesAllowed",
          "value": {
            "type": 1,
            "string": "any"
          }
        },
        {
          "key": "urlParts",
          "value": {
            "type": 1,
            "string": "specific"
          }
        },
        {
          "key": "query",
          "value": {
            "type": 8,
            "boolean": true
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  }
]


___TESTS___

scenarios: []


___NOTES___

Created on 3/12/2020, 11:02:14 AM


